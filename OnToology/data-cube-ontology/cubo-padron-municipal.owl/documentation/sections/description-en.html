<html>
<h2 id="desc" class="list">Vocabulary for data cubes representation of census of inhabitants: Description <span class="backlink"> back to <a href="#toc">ToC</a></span></h2>
<span class="markdown">
  For the generation of the data cubes of census of inhabitants, the vocabulary [W3C Data Cube](<https://www.w3.org/TR/vocab-data-cube>) vocabulary is reused. This vocabulary is a recommendation for multidimensional data plublication, since it enables its linking with related data and concepts. Likewise, this vocabulary is compatible with the SDMX (Statistical Data and Metadata eXchange) standard, which allows sharing and exchanging statistical data and metadata between
  organizations. SDMX is a [ISO International Standard IS-17369](<https://sdmx.org>) that is sustained in concepts of dimensions, attributes and measures described as a data structure.
</span>

<center><img src="https://www.w3.org/TR/vocab-data-cube/images/qb-fig1.png"><figcaption>Figure 1.- Diagram of the W3C Data Cube vocabulary.</figcaption></center>

<span class="markdown">
  Figure 1 shows that W3C Data Cube contains some concepts and properties that enable the description of data for different levels of aggregation. However, with the aim of facilitating the explanation of the concepts and properties used to represent the data cubes of the census of inhabitants, the extract of Figure 2 will be used. To simplify, blank nodes are used to make reference to the different instances of
  [ComponentSpecification](https://www.w3.org/TR/vocab-data-cube/#dfn-qb-componentspecification) that must be generated to describe each measure or dimension.
</span>

<center><img src="resources/images/CuboDatosExtracto.png"><figcaption>Figure 2.- Extract of the W3C Data Cube vocabulary.</figcaption></center>

<span class="markdown">
Specifically, data cubes are composed of some dimensions and measures that allow the definition of different observations. In Figure 2, the vocabulary, represented by the prefix qb, is organized around the concept [qb:DataSet](https://www.w3.org/TR/vocab-data-cube/#reference-datasets). This concept is defined as a recopilation of data correspondent to another structure defined by [qb:DataStructureDefinition](https://www.w3.org/TR/vocab-data-cube/#dsd) and that is materialized through a set of observations  represented by [qb:Observation](https://www.w3.org/TR/vocab-data-cube/#reference-datasets). The dimensions and measures that can be defined in each dataset's structure are represented by:
</span>
<ul>
 <li><a href="https://www.w3.org/TR/vocab-data-cube/#dsd-dimensions">qb:DimensionProperty</a>: Component that identifies the dimensions of the observations, whether it is with regard to sex, age, time, geographic region, level of education, etc. Dimensions often represent concepts, which taken by code lists, also known as classifications, that are usually identified with the use of the SKOS vocabulary.</li>
 <li><a href="https://www.w3.org/TR/vocab-data-cube/#dsd-dimensions">qp:MeasurementProperty</a>: Component that represents the measured value of the observed data, such as population density, youth index, percentage of adult population, number of foreigners, etc. </li>
</ul>

<span>
For the definition of these dimensions and measures, some other reference vocabularies are also reused, vocabularies that are used in other national and international projects:

<ol>
 <li>SDMX vocabularies (Statistical Data and Metadata eXchange):</li>
 <ul>
   <li><a href="http://purl.org/linked-data/sdmx/2009/dimension">sdmx-dimension</a>: For the definition of dimensions such as reference area, reference period, simple age, sex and level of education.</li>
   <li><a href="http://purl.org/linked-data/sdmx/2009/code">sdmx-code</a>: For the definition of concept lists to represent the sex of the inhabitants.</li>
 </ul>
 <li>IAEST vocabularies:</li>
    <ul>
      <li><a href="https://opendata.aragon.es/def/iaest/dimension">iaest-dimension</a>: For the definition of dimensions such as <a href="https://opendata.aragon.es/def/iaest/dimension#edad-grupos-quinquenales">five-year age groups</a> and <a href="http://opendata.aragon.es/def/iaest/dimension#nacionalidad">nationality</a>.</li>
      <li>SKOS IAEST: For the definition of concept lists of <a href="https://opendata.aragon.es/kos/iaest/edad-grupos-quinquenales">five-year age groups</a> and <a href="https://opendata.aragon.es/kos/iaest/nacionalidad">nationality</a>.</li>
    </ul>
 <li>Other SKOS lists:</li>
 <ul>
   <li>For the representation of the dimension's years of the reference period, the code list <a href="http://reference.data.gov.uk/id/year">time intervals</a> of the british government will be reused.</li>
   <li>For the level of education, the <a href="http://vocab.linkeddata.es/datosabiertos/kos/demografia/padron-municipal/tipo-nivel-estudio">types of studies</a> code list, defined for the vocabulary of the census of inhabitants, will be reused.</li>
  <li>For the representation of simple ages (in other words, for each year of age), a new code list of <a href="http://vocab.linkeddata.es/datosabiertos/kos/demografia/padron-municipal/edad">age</a> has been generated.</li>
 </ul>
</ol>
</span>

<span class="markdown">
  While the abovementioned vocabularies are reused, it has been necessary to develop a vocabulary that enables the representation of measures related to the data and requirements of the vocabulary of the census of inhabitants ([espad-medida](http://vocab.ciudadesabiertas.es/def/demografia/padron-municipal/medida)).

  With all the needed vocabularies for the representation of the requirements, the cubes that will be obtained for the data of Census of Inhabitants can be defined. It is important to mention that the requirements that will be represented are those responsible for the statistical exploitation of the data of census of inhabitants. These requirements correspond to those defined as Competency Questions marked as accepted (A) and that are between Req-41 and Req-73 of the [Requirement Specification](https://github.com/CiudadesAbiertas/vocab-demografia-padron-municipal/requirements) deliverable.
</span>

<div id="cubosdeedad">
<h3 id="qb1" class="list">Population cube by age (simple age)<span class="backlink"> back to <a href="#toc">ToC</a></h3>
<span class="markdown">
  In this cube there is represented data related to the inhabitant's age. Specifically, the defined dimensions are sex, reference period, reference area and age. The general measure is defined as the number of people, since it gathers data related to total population by age, total population by age and sex, total population by age, sex and area, and total population by sex. Figure 3 illustrates the corresponding diagram.
</span>
</div>

<center>
  <img src="resources/images/CuboDatosEdad.png"><figcaption>Figure 3.- Population data cube by age.</figcaption>
</center>
<div id="cubosderangosedad">
<h3 id="qb2" class="list">Population cube by five-year age groups<span class="backlink"> back to <a href="#toc">ToC</a></h3>
<span class="markdown">
  In this cube there is represented data related to the inhabitant's age by five-year age groups. Specifically, the defined dimensions are sex, reference period, reference area and age ranges by five-year groups. The general measure is defined as the number of people, since it gathers data related to total population by age ranges, total population by sex, total population by age ranges and sex, total population by age ranges, sex and area.
</span>
</div>

<center>
  <img src="resources/images/CuboDatosEdadRangosQuinquenales.png"><figcaption>Figure 4.- Population data cube by five-year age groups.</figcaption>
</center>

<div id="cubosdenacionalidad">
  <h3 id="qb3" class="list">Population cube by nationality<span class="backlink"> back to <a href="#toc">ToC</a></h3>
<span class="markdown">
  In this cube there is represented data related to the inhabitant's nationality. Specifically, the defined dimensions are sex, reference period, reference area, age ranges by five-year groups and nationality. In the dimension of nationality the inhabitant's particularities can be specified, whether they are [spaniards](https://opendata.aragon.es/kos/iaest/nacionalidad/espanoles), [community foreigners](https://opendata.aragon.es/kos/iaest/nacionalidad/extranjeros-comunitarios-ue-27), or [non-community foreigners](https://opendata.aragon.es/kos/iaest/nacionalidad/extranjeros-no-comunitarios). For the case in which the United Kingdom has to be considered inside the European Community, the concept [extranjeros-comunitarios-ue-28](https://opendata.aragon.es/kos/iaest/nacionalidad/extranjeros-comunitarios-ue-28) can be used.

  The general measure is defined as the number of people, since it gathers data related to total foreign population, total foreign population by sex, total spanish population, total community foreign population and total non-community foreign population.
</span>
  <center><img src="resources/images/CuboDatosNacionalidad.png"><figcaption>Figura 5.- Population data cube by nationality.</figcaption></center>
</div>
<div id="cubosdeestudios">
  <h3 id="qb4" class="list">Population cube by level of education<span class="backlink"> back to <a href="#toc">ToC</a></h3>
<span class="markdown">
  In this cube there is represented data related to the inhabitants' level of studies. Specifically, the defined dimensions are reference period, reference area, sex, simple age and level of education. The general measure is defined as the number of people to gather values related to total population by level of education and age, and total population by level of studies, age and sex in the reference area X and period Y.
</span>
  <center><img src="resources/images/CuboDatosEstudios.png"><figcaption>Figura 6.- Population data cube by level of education.</figcaption></center>
</div>
<div id="cubosdeprocedencia">
  <h3 id="qb5" class="list">Population cube by place of provenance<span class="backlink"> back to <a href="#toc">ToC</a></h3>
  <span class="markdown">
  In this cube there is represented data related to the inhabitants' place of provenance. Specifically, the defined dimensions are reference period, area, level of education, five-year age groups, municipality of provenance and country of provenance. It is important to mention that the properties [municipality](http://vocab.ciudadesabiertas.es/def/demografia/padron-municipal#municipioProcedencia), [province](http://vocab.ciudadesabiertas.es/def/demografia/padron-municipal#provinciaProcedencia), and [country](http://vocab.ciudadesabiertas.es/def/demografia/padron-municipal#paisProcedencia) of provenance have been reused from the developed vocabulary to represent raw data of the exchanged files of census of inhabitants. Finally, the general measure is defined as the number of people, since it gathers data related to total population by country of provenance of area X, province of provenance of area X, municipality of provenance of area X, country of provenance and level of education by age ranges of inhabitants of area X, province of provenance and level of education by age ranges of inhabitants of area X, and municipality of provenance and level of education by age ranges of inhabitants of area X.
  </span>
  <center><img src="resources/images/CuboDatosProcedencia.png"><figcaption>Figura 7.- Population data cube by place of provenance.</figcaption></center>
</div>
<div id="cubosdepaisnacimiento">
  <h3 id="qb6" class="list">Population cube by country of birth<span class="backlink"> back to <a href="#toc">ToC</a></h3>
  <span class="markdown">
  In this cube there is represented data related to the inhabitants' country of birth. Specifically, the defined dimensions are sex, reference period, reference area, five-year age groups and country of birth. It is important to mention that the [paisNacimiento](http://vocab.ciudadesabiertas.es/def/demografia/padron-municipal#paisNacimiento) property has been reused from the developed vocabulary to represent raw data of the exchanged files of census of inhabitants. The general measure is defined as the the number of people, since it gathers data related to total population that was born outside Spain, total population by country of birth and sex, and total population by country of birth.
</span>
  <center><img src="resources/images/CuboDatosPaisNacimiento.png"><figcaption>Figura 8.- Figura 8.- Population data cube by country of birth.</figcaption></center>
</div>
<div id="cubosdeindicadores">
  <h3 id="qb7" class="list">Cube of demographic structure indicators<span class="backlink"> back to <a href="#toc">ToC</a></h3>
  <span class="markdown">
  In this cube there is represented data related to indexes calculated from data of census of inhabitants. The defined dimensions are reference period and area in which the values of the mentioned indexes are calculated. The measures associated to this cube are specifically designed for each index. Thus we obtain the dependency index, feminity index, infancy index, youth index, maternity index, active population index, replacement index, over aging index, tendency index, mortality index, natality index, average age of the population, percentage of the population born abroad (porcentaje-de-población-extranjera), percentage of young population, percentage of adult population, percentage of aged population, and percentage of foreign child population. Finally, and following the generalization described in other cubes, the measure is defined as the number of people to gather the values of total population, number of population growth, and total population in a range of years.
</span>
  <center><img src="resources/images/CuboDatosIndicadores.png"><figcaption>Figura 9.- Population data cube by demographic structure indicators.</figcaption></center>
</div>

<h2 id="exa" class="list">Examples of the data cubes of census of inhabitants<span class="backlink"> back to <a href="#toc">ToC</a></span></h2>
<span class="markdown">
This section contains a couple of examples where the population data is described by the cube structures previously defined.</span>

<div id="example1">
  <h3 id="exz1" class="list">Example 1: Population by area, sex and age range</h3>
<span class="markdown">
  This example represents the total population data from Madrid by area, age range and sex. Figure 10 shows the diagram correspondent to the mentioned data according to the population data cube by age.
</span>

  <center><img src="resources/images/EjemploCuboDatosPoblacion-RangoEdades-Sexo-AreaResidencia.jpg"><figcaption>Figure 10.- Example of total population by age range, sex and residence area.</figcaption></center>

<span class="markdown">
  Having in mind the diagram shown in Figure 10, we define below the necessary steps to create the instances belonging to the data associated to this example.

  1) Definition of the dataset or data cube: An instance of [qb:Dataset](http://purl.org/linked-data/cube#DataSet) is generated, and will represent the example dataset. Later, this set is linked, through the [qb:structure](http://purl.org/linked-data/cube#structure) property, with the instance of the data structure defined in the second step.
</span>
  <pre>
&lt;http://vocab.ciudadesabiertas.es/recurso/demografia/padron-municipal/DS_PoblacionPorEdadGruposQuinquenales&gt; a qb:DataSet ;
qb:structure &lt;http://vocab.ciudadesabiertas.es/recurso/demografia/padron-municipal/DSD_PoblacionPoblacionPorEdadGruposQuinquenales&gt; .
  </pre>
<span class="markdown">
  2) Definition of the data structure: In this step we specify the dimensions and measures which gather the population cube by five-year age groups. For this purpose, an instance of [qb:DataStructureDefinition](http://purl.org/linked-data/cube#DataStructureDefinition) is created, with its metadata associated. It is important to mention that this structure is previously defined in the instances contained in this vocabulary. These instances are of type [ComponentSpecification](https://www.w3.org/TR/vocab-data-cube/#dfn-qb-componentspecification) and are generated to represent each dimension or measure. However, the example shows how they can be also generated with blank nodes instead of instances of ComponentSpecification.
</span>
<pre>
&lt;http://vocab.ciudadesabiertas.es/recurso/demografia/padron-municipal/DSD_PoblacionPoblacionPorEdadGruposQuinquenales&gt; a qb:DataStructureDefinition ;
rdfs:label "Estructura de los cubos de datos que se corresponden con el conjunto de datos de padrón municipal de la ciudad de
Madrid, en este archivo se detalla el número de habitantes según su sexo, rango de edad y el área donde reside"@es ;
skos:notation "DSD_PoblacionPorEdad" .
  </pre>
<span class="markdown">
Thereafter, the dimensions of the data cube structure are defined. For this purpose, the property [qb:component](http://purl.org/linked-data/cube#component) is used to link the data structure previously defined with the correspondent blank node. Then, the same blank node is linked with the property [qb:dimension](http://purl.org/linked-data/cube#dimension) to the concept of the vocabulary that represents the dimensions that is being represented. In the example, the specified dimensions are: sex, reference area, reference period and five-year age groups.
</span>
<pre>
&lt;http://vocab.ciudadesabiertas.es/recurso/demografia/padron-municipal/DSD_PoblacionPoblacionPorEdadGruposQuinquenales&gt; qb:component _:node1egmfx1 .
_:node1egmfx1 qb:dimension sdmx-dimension:sex .

&lt;http://vocab.ciudadesabiertas.es/recurso/demografia/padron-municipal/DSD_PoblacionPoblacionPorEdadGruposQuinquenales&gt; qb:component _:node1egmfx2 .
_:node1egmfx2 qb:dimension sdmx-dimension:refArea .

&lt;http://vocab.ciudadesabiertas.es/recurso/demografia/padron-municipal/DSD_PoblacionPoblacionPorEdadGruposQuinquenales&gt; qb:component _:node1egmfx3 .
_:node1egmfx3 qb:dimension sdmx-dimension:refPeriod .

&lt;http://vocab.ciudadesabiertas.es/recurso/demografia/padron-municipal/DSD_PoblacionPoblacionPorEdadGruposQuinquenales&gt; qb:component _:node1egmfx4 .
_:node1egmfx4 qb:dimension iaest-dimension:edad-grupos-quinquenales.
</pre>
<span class="markdown">
  Likewise, the measures of the data structure are defined. For this reason, the property [qb:component](http://purl.org/linked-data/cube#component) is used to link the data structure with the correspondent blank node. Then, the same node blank is linked with the property [qb:measure](http://purl.org/linked-data/cube#measure) to the concept of the vocabulary that represents the measure that is being represented. In the example, the specified measure is the number of people.
</span>
<pre>
  &lt;http://vocab.ciudadesabiertas.es/recurso/demografia/padron-municipal/DSD_PoblacionPoblacionPorEdadGruposQuinquenales&gt; qb:component _:node1egmfx5 .
_:node1egmfx5 qb:measure espad-measure:numero-personas.
</pre>
<span class="markdown">
  3) Definition of an observation of the dataset: The last step consists in the representation of the observations. For that purpose, an instance of [qb:Observation](http://purl.org/linked-data/cube#Observation) is created for each data that is to be represented. Moreover, the property [qb:dataSet](http://purl.org/linked-data/cube#dataSet) is used to link the observation to the correspondent dataset. The dimensions and measures described in the observation can also be instantiated. For that aim, the properties defined in the data structure (step 2) are used. Each one of the dimensions and measures are linked with the correspondent values (instances of the code lists or concepts, according to the case).
</span>
<pre>
&lt;http://vocab.ciudadesabiertas.es/recurso/demografia/padron-municipal/a209fd32c10cf5d06e4e6aedf8b81950b4e981f3&gt; a qb:Observation ;
qb:dataSet &lt;http://vocab.ciudadesabiertas.es/recurso/demografia/padron-municipal/DS_PoblacionPorEdadGruposQuinquenales&gt; ;
sdmx-dimension:refArea &lt;http://vocab.ciudadesabiertas.es/recurso/territorio/distrito/Centro&gt; ;
sdmx-dimension:refPeriod &lt;http://reference.data.gov.uk/id/year/2019&gt; ;
espad-medida:numero-personas ”2731"^^xsd:int ;
sdmx-dimension:sexo &lt;http://purl.org/linked-data/sdmx/2009/code#sex-M&gt; ;
iaest-dimension:edad-grupos-quinquenales &lt;https://opendata.aragon.es/kos/iaest/edad-grupos-quinquenales/20-a-24&gt; .
</pre>

  <div id="example2">
    <h3 id="exz2" class="list">Example 2: Youth index</h3>
<span class="markdown">
  This example shows data related to the youth index registered in the population of Madrid. The instances are created the same manner as in Example 1. Figure 11 depicts the diagram correspondent to the youth index in 2018 and 2019 in the district "Centro". This data is represented by two observations that specify the values of the dimensions and measures for this case.
</span>
    <center><img src="resources/images/EjemploCuboDatosIndice_De_Juventud.png"><figcaption>Figure 11.- Example of total population by age range, sex and residence area.</figcaption></center>

<span class="markdown">
  Finally, some [query examples](https://github.com/CiudadesAbiertas/vocab-demografia-padron-municipal/blob/master/examples/queries-cubos-datos.md) have been generated, and can be executed to extract the data represented for each one of the cubes in the present document.
</span>

<h2 id="conf" class="list">Confidentiality <span class="backlink"> back to <a href="#toc">ToC</a></span></h2>
<span class="markdown">
  Taking into account the [confidentiality politics](https://www.ine.es/dynt3/metadatos/es/RespuestaDatos.htm?oe=30243) adopted by the National Institute of Statistics (INE) for the treatment of data from census of population and households, city councils have agreed to follow the same guidelines for the case of data of census of inhabitants. Therefore, city councils won't disseminate and won't make available in any way individual data or aggregates that could lead to identification of data previously not known for a person or an identity.

  In relation to the treatment of confidential data, city counils will follow the following guidelines:

</span>
<ul>
  <li>In the phases of information treatment, data that allow the direct identification will only conserved while are strictly necessary to guarantee the process' quality.</li>
 <li>In the publication of result tables, the information is analyzed in detail to avoid the deduction of confidential data form statistical units. In the cases in which the microdata are disseminated, these will always be anonymized.</li>
 <li>Data confidentiality techniques, such as data swapping or rounding to 5, will be applied. Moreover, to allow the information dissemination it is necessary that the number of involved observations divided by the number of cells must be superior to a predefined threshold.
</ul>





</html>
